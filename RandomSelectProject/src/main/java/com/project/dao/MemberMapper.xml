<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.dao.MemberMapper">

	<!--yang  -->
	
	
	<!-- 회원가입 -->
	<insert id="putMember" parameterType="MemberDTO">
		insert into member
		(memid,memname,membirth,mempasswd,memmobile,memgrade,leave)
		values
		(#{memId}, #{memName}, #{memBirth}, #{memPasswd}, #{memMobile},
		'1','o')
	</insert>

	<!-- 로그인 -->
	<select id="getMemberInfoByMemId" parameterType="MemberDTO"
		resultType="MemberDTO">
		select memid, memname from member
		where memid=#{memId} and
		mempasswd=#{memPasswd}
	</select>

	<!-- 아이디찾기 -->
	<select id="getMemIdByMemberTerms" parameterType="MemberDTO"
		resultType="string">
		select memid from member
		where memname=#{memName} and
		membirth=#{memBirth} and memmobile=#{memMobile}
	</select>

	<!-- 비밀번호찾기 -->
	<select id="getMemPasswdByMemberTerms" parameterType="MemberDTO"
		resultType="string">
		select mempasswd from member
		where memid=#{memId} and
		membirth=#{memBirth} and memmobile=#{memMobile}
	</select>

	<!-- 내정보 -->
	<select id="getMyInfoByMemId" parameterType="MemberDTO"
		resultType="MemberDTO">
		select memid, memname, memgrade from member where
		memid=#{memId}
	</select>

	<!-- 현재비밀번호 확인 -->
	<select id="getMemPasswdByMemId" parameterType="MemberDTO"
		resultType="string">
		select mempasswd from member
		where memid=#{memId}
	</select>

	<!-- 정보수정 -->
	<update id="setMemberInfoByMemberTerms" parameterType="MemberDTO">
		update
		member set mempasswd=#{memPasswd}, memmobile=#{memMobile}
		where
		memid=#{memId}
	</update>

	<!-- 탈퇴 -->
	<update id="putLeave" parameterType="MemberDTO">

		update member set 
		leave='1',
		leavereason=#{leaveReason}, 
		leavedate=sysdate
		update member set leave='x',
		leavereason=#{leaveReason}, leavedate=sysdate

		where memid=#{memId}
	</update>
	
	
	
	
	
	
	<!--koo  -->
	
		
	<!--관리자 : 아이디로 유저 검색 -->
	<select id="getMemberListById" resultType="MemberDTO" parameterType="String">
	select memberid,membername,membergrade,black where memid = #{memId}  
	</select>
	
	<!--관리자 : 이름으로 유저 검색  -->
	<select id="getMemberListByName" resultType="MemberDTO" parameterType="String">
	select memberid,membername,membergrade,black where memname = #{memName}  
	</select>
	
	<!--관리자 : 등급으로 유저 검색  -->
	<select id="getMemberListByGrade" resultType="MemberDTO" parameterType="String">
	select memberid,membername,membergrade,black where memgrade = #{memGrade}  
	</select>
	
	<!--관리자 : 블랙으로 유저 검색  -->
	<select id="getMemberListByBlack" resultType="MemberDTO" parameterType="String">
	select memberid,membername,membergrade,black where memblack = #{memBlack}  
	</select>
	
	<!--관리자 : 회원 정보 수정  -->
	<update id="setMemberInfo" parameterType="MemberDTO">
	update member set 
	membergrade=#{memberGrade},
	black = #{black}
	where memid=#{memId}
	</update>

</mapper>